### 1. 查询"01"课程比"02"课程成绩高的学生的信息及课程分数

```mysql
select stu.Sname,s.score
from student as stu
inner join 
(select s1.SId,s1.score
from (select SId,score from sc where CId='01') as s1
inner join (select SId,score from sc where CId='02') as s2
on s1.SId=s2.SId where s1.score > s2.score) as s
on stu.SId=s.SId;
```

### 2. 查询同时存在"01"课程和"02"课程的情况

```mysql
select s1.* 
from (select sid,score from sc where cid='01') as s1
inner join (select sid,score from sc where cid='02') as s2
on s1.sid=s2.sid;
```

### 3. 查询存在"01"课程但可能不存在"02"课程的情况(不存在时显示为null)

```mysql
select s1.sid,s1.score as 01_score,s2.score as 02_score
from (select sid,score from sc where cid='01') as s1
left join (select sid,score from sc where cid='02') as s2
on s1.sid=s2.sid;
```

### 4. 查询不存在"01"课程但存在"02"课程的情况

```mysql
# 方法一
select s.sid,s.score
from (select s2.*,s1.score as score1
from (select sid,score from sc where cid='02') as s2
left join (select sid,score from sc where cid='01') as s1
on s2.sid=s1.sid) as s
where s.score1 is null;

# 方法二
select * from sc
where sid not in (select sid from sc where cid='01') and cid='02';
```

### 5. 查询平均成绩大于等于 60 分的同学的学生编号和学生姓名和平均成绩

```mysql
select stu.sid,stu.sname,s.avg_score
from student as stu
inner join (select sid,round(avg(score), 2) as avg_score from sc group by sid having avg_score >= 60) as s
on stu.sid=s.sid;


select sc.sid,sname,round(avg(score), 2) as avg_score
from sc,student
where sc.sid=student.sid
group by sc.sid,sname
having avg_score >= 60;
```

### 6. 查询在SC表存在成绩的学生信息

```mysql
select distinct stu.*
from student as stu
inner join sc on sc.sid=stu.sid;
```

### 7. 查询所有同学的学生编号、学生姓名、选课总数、所有课程总成绩(没成绩的显示为null)

```mysql
select stu.sid,sname,count(cid) as num,sum(score) as total_score
from student as stu
left join sc on sc.sid=stu.sid
group by stu.sid,sname;
```

### 8. 查询所有"李"姓老师

```mysql
select *
from teacher
where tname like '李%';
```

### 9. 查询学过"张三"老师的同学的信息

```mysql
select stu.*
from student as stu
inner join sc on sc.sid=stu.sid
inner join course on sc.cid=course.cid
inner join teacher on course.tid=teacher.tid
where tname='张三';
```

### 10. 查询没有学全所有课程的同学信息

```mysql
select stu.sid,sname
from student as stu
where sid not in (select s1.sid from sc as s1 inner join (select sid,count(sid) as num from sc group by sid having num = 3) as s2 on s1.sid=s2.sid);

select stu.sid,sname,count(cid) as num,sum(score) as total_score
from student as stu
left join sc on sc.sid=stu.sid
group by stu.sid,sname having num < 3;
```

### 11. 查询至少有一门课与学号为"01"的同学所学相同的同学的信息

```mysql
select distinct stu.*
from student as stu
inner join sc on sc.sid=stu.sid
where cid in (select cid from sc where sid='01');
```

### 12. 查询和"01"号同学学习的课程 完全相同的其他同学的信息

```mysql
select s2.sid,sname
from sc as s1
inner join sc as s2 on s1.sid='01' and s2.sid!='01' and s1.cid=s2.cid
inner join student as stu on s2.sid=stu.sid
group by s2.sid,sname
having count(s2.sid) = (select count(sid) from sc where sid='01');
-- 有点问题，如果一个同学学了4门课，包含01同学的三门课，无法区分
```

### 13. 查询没学过"张三"老师讲授的任一门课程的学生的姓名

```mysql
select sname,sc.cid
from student as stu
inner join sc on stu.sid=sc.sid
inner join 
(select course.cid
from course inner join teacher on course.tid=teacher.tid
where tname='张三'
) as c on sc.cid=c.cid;
```

### 14. 查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩

```mysql
select stu.sid,sname,avg(score) as avg_score
from student as stu
inner join (
select s2.sid,score from sc inner join (select sid,count(score) as num from sc where score < 60 group by sid having num >=2) as s2 on sc.sid=s2.sid
) as s on s.sid=stu.sid
group by stu.sid,sname;
```

### 15. 检索"01"课程分数小于60，按分数降序排列的学生信息

```mysql
select stu.sid,sname,score
from student as stu
inner join sc on stu.sid=sc.sid
where cid='01' and score < 60
order by score desc;
```

### 16. 按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩

```mysql
select sname,sum(score) as total_score, round(avg(score), 2) as avg_score
from student as stu
inner join sc on sc.sid=stu.sid
group by sname
order by avg_score desc;
```

